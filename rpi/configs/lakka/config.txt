# SPDX-License-Identifier: GPL-2.0-or-later
# Copyright (C) 2009-2014 Stephan Raue (stephan@openelec.tv)
# Copyright (C) 2016-present Team LibreELEC (https://libreelec.tv)
################################################################################
# Bootloader configuration
# config.txt version v1 (do not remove or change this line!)
################################################################################
# For more options and information see
# http://rpf.io/configtxt
################################################################################

# Default GPU memory split, 76MB are needed for H264 decoder
gpu_mem=76

# Don't send initial active source message.
# Avoids bringing CEC (enabled TV) out of standby and channel switch when
# rebooting.
hdmi_ignore_cec_init=1

[all]
################################################################################
# Use distroconfig-composite.txt instead of distroconfig.txt to enable
# composite video output.
# The composite video mode needs to be configured in cmdline.txt:
# For PAL add: video=Composite-1:720x576@50ie
# For NTSC add: video=Composite-1:720x480@60ie
################################################################################
include distroconfig.txt
#include distroconfig-composite.txt

force_turbo=0

# Don't show splash screen
disable_splash=1

# Enable I2C
dtparam=i2c_arm=on

# Enable audio (loads snd_bcm2835)
dtparam=audio=on

# Reduce I2C speed to avoid clock bug in Raspberry Pi I2C
dtparam=i2c_baudrate=25000

#disable HDMI audio
hdmi_ignore_edid_audio=1

#enable the real time clock
dtoverlay=i2c-rtc,pcf8563

# Automatically load overlays for detected DSI displays
display_auto_detect=1

#Configure DPI signal
framebuffer_width=800
framebuffer_height=480
enable_dpi_lcd=1
display_default_lcd=1
dpi_group=2
dpi_mode=87
dpi_output_format=503863

# Enable DRM VC4 V3D driver
dtoverlay=vc4-fkms-v3d
max_framebuffers=1

# Set GPIO pins to 24-Bit DPI Mode 7
# GPIO 0 and 1 needed for DPI Clock and Data Enable
gpio=0=a2,np
gpio=1=a2,np
# Set GPIO pins 2 and 3 to I2C Mode. These can be used for other things, if needed.
gpio=2=a0,np
gpio=3=a0,np
# Set up color pins
gpio=4-27=a2,np

dpi_timings=800 0 8 4 8 480 0 8 4 8 0 0 0 60 0 25000000 6

# Enable USB
dtoverlay=dwc2,dr_mode=host

# Disables pci-e link to prevent warning at boot
dtoverlay=disable-pcie

#enable external PSP antenna
dtparam=ant2

# Set up CM4 audio pin
dtoverlay=audiocm4

arm_freq_min=300
core_freq_min=200